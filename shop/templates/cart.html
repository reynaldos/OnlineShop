{% extends "base.html" %} {% block title %}Shopping Cart{% endblock %} 
{% block content %}
    <!-- HTML Body content here -->
    <h1>Shopping Cart</h1>
   
    <div class="row g-5">
        <div class="col-md-5 col-lg-5 order-md-last">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-primary">Your cart</span>
            <span class="badge bg-primary rounded-pill">{{ cartItems|length }}</span>
          </h4>
          <ul class="list-group mb-3">
        
              {% if cartItems|length > 0 %}
                {% for product in cartItems%}
                    <li class="list-group-item d-flex justify-content-between lh-sm">
                        <div class="row">
                        <img width="100%" class="d-block col-sm-3" src="{{url_for('app.get_img',id=product.PID) }}">
                        <h6 class="my-0 col-sm-6 ">{{product.Name}}</h6>
                        <span class="text-muted col-sm-2 ">${{product.Price|round|int}}</span>
                        </div>
                        <button type="button " class="close m-l-10" onClick="removeCartItem({{ product.PID }})">
                          <span aria-hidden="true">&times;</span>
                        </button>
                        
                    </li>
                {% endfor%}
              {% else %}
              <li class="list-group-item d-flex justify-content-between lh-sm">
                <h6 class="my-0">No Items in Cart</h6>
                </li>
              {% endif %}
            
            <li class="list-group-item d-flex justify-content-between">
              <span>Total (USD)</span>
              <strong>${{checkOutSum|round|int}}</strong>
            </li>
          </ul>
  
        </div>

        <script>
          function removeCartItem(PID) {
                fetch("/remove-item", {
                  method: "POST",
                  body: JSON.stringify({ PID: PID }),
                }).then((_res) => {
                  window.location.href = "/cart";
                });
              }
            function ShowHideDiv() {
                    var chkYes = document.getElementById("same-address");
                    var divToHide = document.getElementById("billingAddress");
                    divToHide.style.display = chkYes.checked ? "none" : "block";
                }
            </script>

        <div class="col-md-7 col-lg-7">

            <h4 class="mb-3">Shipping address</h4>
            <form class="needs-validation" novalidate="" method="POST" >
                <div class="row g-3">
                  <div class="col-sm-6">
                    <label for="firstName" class="form-label">First name</label>
                    <input type="text" class="form-control" id="firstName" placeholder=""  required="" value={{user.Fname}}>
                    <div class="invalid-feedback">
                      Valid first name is required.
                    </div>
                  </div>
      
                  <div class="col-sm-6">
                    <label for="lastName" class="form-label">Last name</label>
                    <input type="text" class="form-control" id="lastName" placeholder="" required="" value={{user.Lname}}>
                    <div class="invalid-feedback">
                      Valid last name is required.
                    </div>
                  </div>
      
                  <div class="col-12">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" placeholder="you@example.com" required="" value={{user.Email}}>
                    <div class="invalid-feedback">
                      Please enter a valid email address for shipping updates.
                    </div>
                  </div>
      
                  <div class="col-12">
                    <label for="address" class="form-label">Address</label>
                    <input type="text" class="form-control" id="address" placeholder="1234 Main St" required=""  value={{user.Address}} >
                    <div class="invalid-feedback">
                      Please enter your shipping address.
                    </div>
                  </div>
      
                  <div class="col-12">
                    <label for="address2" class="form-label">Address 2 <span class="text-muted">(Optional)</span></label>
                    <input type="text" class="form-control" id="address2" placeholder="Apartment or suite">
                  </div>
      
                  <div class="col-4">
                    <label for="country" class="form-label">Country</label>
                    <input type="text" class="form-control" id="country" placeholder="" required="" value={{user.Country}}>
                    <div class="invalid-feedback">
                        Please select a valid Country.
                    </div>
                  </div>
      
                  <div class="col-4">
                    <label for="state" class="form-label">State</label>
                    <input type="text" class="form-control" id="state" placeholder=""  required="" value={{user.State}}>
                    <div class="invalid-feedback">
                        Please select a valid State.
                    </div>
                  </div>
      
                  <div class="col-md-4">
                    <label for="zip" class="form-label">Zip</label>
                    <input type="text" class="form-control" id="zip" placeholder="" required="" value={{user.ZipCode}}>
                    <div class="invalid-feedback">
                      Zip code required.
                    </div>
                  </div>
                </div>

        <hr class="my-4">

        <div class="form-check">
            <input type="checkbox"  id="same-address" onclick="ShowHideDiv()" >
            <label class="form-check-label" for="same-address">Billing address is the same as my shipping address</label>
        </div>
        <hr class="my-4">   


        <div id="billingAddress">
          <h4 class="mb-3">Billing address</h4>
        
            <div class="row g-3">
              <div class="col-sm-6">
                <label for="BILLfirstName" class="form-label">First name</label>
                <input type="text" class="form-control" id="BILLfirstName" placeholder="" value="" >
                <div class="invalid-feedback">
                  Valid first name is required.
                </div>
              </div>
  
              <div class="col-sm-6">
                <label for="BILLlastName" class="form-label">Last name</label>
                <input type="text" class="form-control" id="BILLlastName" placeholder="" value="">
                <div class="invalid-feedback">
                  Valid last name is required.
                </div>
              </div>
  
              <div class="col-12">
                <label for="BILLaddress" class="form-label">Address</label>
                <input type="text" class="form-control" id="BILLaddress" placeholder="1234 Main St" >
                <div class="invalid-feedback">
                  Please enter your shipping address.
                </div>
              </div>
  
              <div class="col-12">
                <label for="BILLaddress2" class="form-label">Address 2 <span class="text-muted">(Optional)</span></label>
                <input type="text" class="form-control" id="BILLaddress2" placeholder="Apartment or suite">
              </div>
  
              <div class="col-4">
                <label for="BILLcountry" class="form-label">Country</label>
                <input type="text" class="form-control" id="BILLcountry" placeholder="" >
                <div class="invalid-feedback">
                    Please select a valid Country.
                </div>
              </div>
  
              <div class="col-4">
                <label for="BILLstate" class="form-label">State</label>
                <input type="text" class="form-control" id="BILLstate" placeholder="" >
                <div class="invalid-feedback">
                    Please select a valid State.
                </div>
              </div>
  
  
              <div class="col-md-4">
                <label for="Billzip" class="form-label">Zip</label>
                <input type="text" class="form-control" id="Billzip" placeholder="" >
                <div class="invalid-feedback">
                  Zip code required.
                </div>
              </div>
            </div>

            <hr class="my-4">
            </div>
      
            <h4 class="mb-3">Payment</h4>
  
            <div class="my-3">
              <div class="form-check">
                <input id="credit" name="paymentMethod" type="radio" class="form-check-input" checked="" required="">
                <label class="form-check-label" for="credit">Credit card</label>
              </div>
              <div class="form-check">
                <input id="debit" name="paymentMethod" type="radio" class="form-check-input" required="">
                <label class="form-check-label" for="debit">Debit card</label>
              </div>
            </div>
  
            <div class="row gy-3">
              <div class="col-md-6">
                <label for="cc-name" class="form-label">Name on card</label>
                <input type="text" class="form-control" id="cc-name" placeholder="" required="">
                <small class="text-muted">Full name as displayed on card</small>
                <div class="invalid-feedback">
                  Name on card is required
                </div>
              </div>
  
              <div class="col-md-6">
                <label for="cc-number" class="form-label">Credit card number</label>
                <input type="text" class="form-control" id="cc-number" placeholder="" required="">
                <div class="invalid-feedback">
                  Credit card number is required
                </div>
              </div>
  
              <div class="col-md-3">
                <label for="cc-expiration" class="form-label">Expiration</label>
                <input type="text" class="form-control" id="cc-expiration" placeholder="" required="">
                <div class="invalid-feedback">
                  Expiration date required
                </div>
              </div>
  
              <div class="col-md-3">
                <label for="cc-cvv" class="form-label">CVV</label>
                <input type="text" class="form-control" id="cc-cvv" placeholder="" required="">
                <div class="invalid-feedback">
                  Security code required
                </div>
              </div>
            </div>
  
            <hr class="my-4">
  
            <button class="w-100 btn btn-primary btn-lg" type="submit">Checkout</button>
          </form>
        </div>
        <row style="height: 20px;">

        </row>
      </div>
      
   

    {% endblock %}